#include <SoftwareSerial.h>
#include "VoiceRecognitionV3.h"

VR myVR(2, 3);   // RX, TX pins for Voice Recognition module

int relay = 4;   // Device control pin

void setup() {
  Serial.begin(9600);
  myVR.begin(9600);

  pinMode(relay, OUTPUT);
  digitalWrite(relay, LOW);

  if (myVR.clear() == 0) {
    Serial.println("Recognizer ready");
  } else {
    Serial.println("Recognizer not found");
    while (1);
  }
}

void loop() {
  uint8_t records[7]; // buffer
  uint8_t len;

  if (myVR.recognize(records, len) == 0) {
    int command = records[1]; // recognized command ID

    if (command == 1) {        // Command 1 = "ON"
      digitalWrite(relay, HIGH);
      Serial.println("Device ON");
    }
    else if (command == 2) {   // Command 2 = "OFF"
      digitalWrite(relay, LOW);
      Serial.println("Device OFF");
    }
  }
}
